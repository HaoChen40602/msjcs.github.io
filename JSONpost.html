<!doctype html>
<html>
<head>
<title>
POST data?
</title>
<script src='https://cdn.firebase.com/js/client/1.0.11/firebase.js'></script>
<script type='text/javascript'
        src='https://cdn.firebase.com/js/simple-login/1.3.2/firebase-simple-login.js'>
</script>
<script>
function submitter()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }

xmlhttp.onreadystatechange=function()
  {   alert(xmlhttp.status);
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
         
    document.write(xmlhttp.responseText);
    }
  }
spost=new Object();
spost.Title=document.getElementById("Title").value;
spost.Author=document.getElementById("Author").value;
spost.EventDate=document.getElementById("EventDate").value;
spost.Content=document.getElementById("Content").value;
alert("The following info is to be posted:"+spost)
xmlhttp.open("POST","https://luminous-fire-619.firebaseio.com/posts.json",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send(JSON.stringify(spost));
}

function preview(){
document.getElementById("preview").innerHTML=document.getElementById("Content").value;

}
</script>
</head>
<body>
<center>
<form>
Insert post here
password:<input type="password" id="pass" value="meowmeow"/><br/>
TITLE:<input type="text" id="Title" value="Club Announcement"/><br/>
AUTHOR:<input type="text" id="Author"/><br/>
Date of Event: <input type="text" id="EventDate" value="4/24/2014"/> (MM/DD/YYYY, or post will not show up on webpage otherwise (will get it hardcoded eventually))<br/>
Content: (click outside textarea to see result)<br/>
<table style="width:100%;height:500px;" cellspacing="5px"><tr>
<td style="width:50%;"><textarea style="width:100%;height:100%"id="Content" form="daform" onchange="preview();"></textarea></td>
<td style="width:50%;"><div id="preview" style="width:100%;height:100%;border:1px solid black;"></div>
</td></tr></table>
<input type="button" value="Submit!" onclick="submitter();"/><input type="reset" value="reset"/>
</form>

</center>
</body>
<script>

// instatiate the FirebaseSimpleLogin and monitor the user's auth state
var chatRef = new Firebase('https://luminous-fire-619.firebaseio.com/posts');
var auth = new FirebaseSimpleLogin(chatRef, function(error, user) {
  if (error) {
    alert(error);
  } else if (user) {
    alert('User ID: ' + user.id + ', Provider: ' + user.provider + ", name:"+user.username);
  } else {
      // attempt to log the user in with your preferred authentication provider
auth.login('github', {
  rememberMe: true, scope:"user"});
  }
});



</script>



</html>
